<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crypto Marquee</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    .animate-marquee {
      display: inline-flex;
      animation: marquee 40s linear infinite;
    }
  </style>
</head>
<body class="bg-gray-900">

  <!-- Crypto Marquee Section -->
  <section class="relative py-8 border-t border-b border-gray-700" data-aos="fade-up" data-aos-duration="1200">
    <h2 class="text-white text-2xl md:text-3xl font-bold text-center mb-6">Live Crypto Prices</h2>
    <div class="overflow-hidden">
      <div id="marquee" class="whitespace-nowrap flex animate-marquee"></div>
    </div>
  </section>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();

    const marquee = document.getElementById('marquee');

    // Placeholder coins while loading
    const placeholders = Array(15).fill().map((_, i) => `
      <div class="inline-flex items-center gap-3 px-6 text-white font-medium bg-gray-800/30 rounded-lg mx-2 py-1 animate-pulse">
        <div class="w-6 h-6 bg-gray-700 rounded-full"></div>
        <div class="w-16 h-4 bg-gray-700 rounded"></div>
        <div class="w-12 h-4 bg-gray-700 rounded"></div>
      </div>
    `).join('');

    marquee.innerHTML = placeholders; // Show skeleton instantly

    async function fetchCoins() {
      try {
        const res = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=20&page=1&sparkline=false');
        const coins = await res.json();
        marquee.innerHTML = ''; // Clear skeleton

        coins.forEach(coin => {
          const coinEl = document.createElement('div');
          coinEl.className = "inline-flex items-center gap-3 px-6 text-white font-medium bg-gray-800/30 rounded-lg mx-2 py-1 hover:scale-105 transition-transform duration-300";
          coinEl.innerHTML = `
            <img src="${coin.image}" alt="${coin.name}" class="w-6 h-6 rounded-full" />
            <span>${coin.name}</span>
            <span class="font-bold">$${coin.current_price.toLocaleString()}</span>
          `;
          marquee.appendChild(coinEl);
        });
      } catch (err) {
        console.error(err);
        marquee.innerHTML = '<span class="text-red-500 px-6">Failed to load data</span>';
      }
    }

    fetchCoins();
    setInterval(fetchCoins, 60000); // refresh every 60 seconds
  </script>
</body>
</html>
